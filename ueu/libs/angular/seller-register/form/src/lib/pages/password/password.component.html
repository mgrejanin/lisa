<section class="c-section">
    <div class="c-section__headline">
        <div class="row">
            <div class="col-md-12">
                <h1 class="c-section__title">{{ title }}</h1>
                <p class="c-section__description">
                    Agora que já sabemos mais sobre a empresa, proteja as informações com uma senha.
                </p>
            </div>
            <div class="col-md-6">
                <apollo-feedback-card
                    label="Este dado é importante. Anote e guarde sua senha, junto de seu e-mail, pois serão utilizados no login de sua conta."
                    emphasis="false"
                    stacked="false"
                    type="warning"
                ></apollo-feedback-card>
            </div>
        </div>
    </div>

    <form class="c-section__form" [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
        <fieldset>
            <div class="row">
                <div class="col-md-6 c-section__form-field">
                    <apollo-textfield
                        #password
                        class="c-section__form-input c-section__form-input--password"
                        label="Senha"
                        formControlName="user_password"
                        type="password"
                        required="true"
                        helper-text="Sua senha deve ter apenas letras e números, e ser maior que 8 caracteres."
                        trailing-icon="true"
                        autocomplete="off"
                    >
                        <apollo-textfield-icon slot="trailing-icon">
                            <apollo-icon
                                #passwordIcon
                                class="c-section__form-icon"
                                svg-icon="interface-eye"
                                (click)="togglePasswordVisibility(password, passwordIcon)"
                            ></apollo-icon>
                        </apollo-textfield-icon>
                    </apollo-textfield>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 c-section__form-field">
                    <apollo-textfield
                        #passwordConfirmation
                        class="c-section__form-input"
                        label="Confirmação da senha"
                        formControlName="user_password_confirmation"
                        type="password"
                        required="true"
                        trailing-icon="true"
                        helper-text="A senha precisa ser correspondente a anterior!"
                    >
                        <apollo-textfield-icon slot="trailing-icon">
                            <apollo-icon
                                #passwordConfirmationIcon
                                svg-icon="interface-eye"
                                (click)="togglePasswordVisibility(passwordConfirmation, passwordConfirmationIcon)"
                            ></apollo-icon>
                        </apollo-textfield-icon>
                    </apollo-textfield>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 c-section__form-checkbox">
                    <apollo-checkbox formControlName="terms" checked="false" nowrap="false">
                        Eu concordo com os
                        <apollo-link href="https://www.picpay.com/app_webviews/terms_biz/" isExternal
                            >Termos e Condições de Uso</apollo-link
                        >
                        e aceito o
                        <apollo-link href="https://contrato.picpay.com/" isExternal
                            >Contrato de Credenciamento.</apollo-link
                        >
                    </apollo-checkbox>
                </div>
            </div>
        </fieldset>
    </form>
</section>

<footer class="c-footer c-footer--reverse">
    <apollo-button
        size="md"
        type="button"
        block
        class="c-footer__button c-footer__button--next"
        [disabled]="(isLoading$ | async) || passwordForm.invalid"
        [loading]="isLoading$ | async"
        (click)="onSubmit()"
    >
        Continuar
    </apollo-button>
    <apollo-button
        size="md"
        type="button"
        block
        variant="link"
        class="c-footer__button c-footer__button--previous"
        [routerLink]="['/form/endereco-empresa']"
    >
        Voltar
    </apollo-button>
</footer>
