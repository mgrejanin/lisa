@use "mixins/breakpoint";
@use "mixins/typography";
@import 'libs/ui/styles/src/lib/theming';

$background-gray: #f2f2f2;

@mixin method-color($color-bg) {
    background: $color-bg;
}

.c-swagger-loading {
    display: flex;
    padding-top: 40px;
    justify-content: center;
}

.c-swagger-scroll {
    width: 100%;
    height: 100%;
    background-color: $background-gray;
    overflow-y: auto;

    @include breakpoint.down(small) {
        height: 100vh;
    }

    &__error {
        &--title {
            text-align: center;
            font-size: theme('fontSize.lg');
            font-weight: theme('fontWeight.bold');
        }

        &--image {
            display: block;
            max-width: 100px;
            margin: theme('spacing.3') auto theme('spacing.2');
        }
    }

    &__title {
        margin: 0;
        padding: theme('spacing.6') theme('spacing.4') theme('spacing.2');
        font-size: theme('fontSize.5xl');
        font-weight: theme('fontWeight.bold');
        color: theme('colors.primary.base');

        &--back {
            cursor: pointer;
            vertical-align: middle;
        }
    }

    &__version {
        padding-left: theme('spacing.4');

        &--label {
            font-size: theme('fontSize.sm');
            font-weight: theme('fontWeight.bold');
            margin: theme('spacing.none') theme('spacing.none') theme('spacing.1');
            color: theme('colors.grayscale.700');
        }

        &--selection-container {
            position: relative;
            margin-bottom: theme('spacing.3');
        }

        &--selection {
            position: relative;
            cursor: pointer;
            padding: theme('spacing.1') theme('spacing.3');
            margin-right: theme('spacing.2');
            background-color: theme('colors.white');
            font-size: theme('fontSize.sm');
            font-weight: theme('fontWeight.bold');
            color: theme('colors.grayscale.700');
            border-radius: theme('spacing.3');
            box-shadow: theme('boxShadow.light');
            text-transform: uppercase;

            &.overlaid {
                display: none;
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                z-index: 4;
            }
        }

        &--selection-button {
            display: block;
            width: 100%;
            font-size: theme('fontSize.base');
            font-weight: theme('fontWeight.bold');
            color: theme('colors.grayscale.500');

            &:hover {
                opacity: theme('opacity.medium');
            }

            &:nth-child(n + 2) {
                padding-top: theme('spacing.2');
            }
        }

        &--arrow {
            position: absolute;
            top: theme('spacing.1');
            right: theme('spacing.1');
            color: theme('colors.grayscale.700');
            transition: all 150ms ease-out;
        }

        &--backdrop {
            display: none;
            position: absolute;
            width: 100vw;
            height: 100vh;
            transform: translate(-25%, -25%);
            background-color: transparent;
            z-index: 3;
        }

        .open {
            display: block;
        }
    }

    &__buttons_wrapper {
        padding-left: theme('spacing.4');
        padding-right: theme('spacing.2');
        padding-bottom: theme('spacing.2');

        &--title {
            font-size: theme('fontSize.base');
            font-weight: theme('fontWeight.bold');
            margin: theme('spacing.none');

            &:hover {
                opacity: 0.5;
            }
        }

        &--group {
            position: relative;
            margin-bottom: 30px;
        }

        &--arrow {
            position: absolute;
            top: -25px;
            right: 0;
            color: theme('colors.grayscale.700');
            transition: all 150ms ease-out;
        }

        &--link {
            display: flex;
            cursor: pointer;
            flex-wrap: wrap;
            @include typography.body(primary, small);
            color: $gray-900;
            border-bottom: 1px solid theme('colors.grayscale.100');
            margin-bottom: theme('spacing.3');

            &:last-child {
                margin-bottom: 0;
            }

            &:hover {
                opacity: 0.85;
                background-color: rgba(0, 0, 0, 0.01);
            }
        }

        &--link_container {
            position: relative;

            .c-swagger-scroll__buttons_wrapper--animation-container {
                position: relative;
                overflow: hidden;
                max-height: 0;
                z-index: 2;
                will-change: max-height, padding-top;
                transition: all 150ms ease-out;
            }
        }

        &--method_badge {
            width: 63px;
            height: 22px;
            text-align: center;
            color: theme('colors.white');
            font-size: theme('fontSize.xs');
            font-weight: theme('fontWeight.bold');
            text-transform: uppercase;
            @include method-color(theme('colors.grayscale.base'));

            &.post {
                @include method-color(theme('colors.primary.base'));
            }

            &.put {
                @include method-color(theme('colors.warning.base'));
            }

            &.delete {
                @include method-color(theme('colors.critical.base'));
            }

            &.get {
                @include method-color(theme('colors.neutral.base'));
            }

            &.patch {
                @include method-color(#43828c);
            }

            &.head {
                @include method-color(theme('colors.primary.base'));
            }

            &.options {
                @include method-color(#0050c5);
            }

            &.deprecated {
                opacity: 0.6;

                @include method-color(theme('colors.grayscale.base'));
            }
        }

        &--method_name {
            word-break: break-word;
            flex: 1;
            padding-left: theme('spacing.half');
            line-height: 22px;
            font-size: theme('fontSize.xs');
            font-weight: theme('fontWeight.extrabold');
            color: theme('colors.grayscale.700');
        }

        &--method_path {
            flex-basis: 100%;
            padding-bottom: theme('spacing.1');
            font-size: theme('fontSize.xs');
            font-weight: theme('fontWeight.normal');
            color: theme('colors.grayscale.600');
        }

        &--checkbox {
            position: absolute;
            display: block;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            z-index: 2;

            &:checked {
                & + .c-swagger-scroll__buttons_wrapper--link_container {
                    .c-swagger-scroll__buttons_wrapper--animation-container {
                        padding-top: theme('spacing.2');
                        max-height: 999px;
                        transition: all 300ms ease-out;
                    }

                    .c-swagger-scroll__buttons_wrapper--arrow {
                        transform: rotate(180deg);
                        transition: all 150ms ease-out;
                    }
                }
            }
        }
    }
}
